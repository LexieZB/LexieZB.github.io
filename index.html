
<!DOCTYPE html>
<html>
<body>

Test
  
<script>

function receiveMessage(e) {
  alert('In!'); 
  var str = '{"search_engine":"1";"content":"web"}'
  var data = JSON.parse(str);
  if (data.search_engine == 1)
  	window.location.replace('https://www.bing.com/search?q=' + data.content);
  else if (data.search_engine == 2)
	window.location.replace('https://www.google.com/search?q=' + data.content);
  else
	alert('Please define search engine');  
}
alert('before function'); 
window.addEventListener("message", receiveMessage, false);
alert('after function'); 
</script>

</body>
</html>
